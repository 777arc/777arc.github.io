
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>7. Ruis en dB &#8212; PySDR: A Guide to SDR and DSP using Python</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/alabaster.css" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-TGRQK1JJYD"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-TGRQK1JJYD');
</script> 

<div id="topBanner" class="modal">
  <div class="modal-content">
    <div class="modal-header" style="background-color: rgb(255, 240, 129); text-align:center;">
      <i>-- Announcement from Marc --</i><br>I'm leading a new education-oriented open-source project called <a target="_blank" href="https://iqengine.org">IQEngine</a>!<br>It's a web-based SDR toolkit for analyzing, processing, and sharing RF recordings.  Checkout out our <a target="_blank" href="https://github.com/IQEngine/IQEngine">GitHub</a> and <a target="_blank" href="https://discord.gg/k7C8kp3b76">Discord</a>
      <div class="closeButton">
        <span style="font-size:30px; position:absolute; top:0px; right:5px; cursor:pointer; ">&times;</span>
      </div>
    </div>
  </div>
</div>

<script>
  var banner = document.getElementById("topBanner");
  var closeButton = document.getElementsByClassName("closeButton")[0];
  // Close banner if they have already clicked the close button in the past
  if (localStorage.getItem('pysdrvisited')){
    banner.style.display = "none";
  }
  // When they click the close button
  closeButton.onclick = function() {
    banner.style.display = "none";
    localStorage.setItem('pysdrvisited', true);
  }
</script>

<div style="float: right; padding-bottom: 0;">
  PySDR is now available in:&nbsp;&nbsp;
  <img src="https://pysdr.org/_static/us.svg" alt="English Version" width="20"><a href="https://pysdr.org/index.html">English</a>&nbsp;&nbsp;
  <img src="https://pysdr.org/_static/nl.svg" alt="Dutch Version" width="20"><a href="https://pysdr.org/nl/index-nl.html">Dutch</a>&nbsp;&nbsp;
  <img src="https://pysdr.org/_static/fr.svg" alt="French Version" width="20"><a href="https://pysdr.org/fr/index-fr.html">French</a>
</div>

  </head><body>
  <div class="document">
    
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<p class="logo">
  <a href="../index-fr.html">
    <img class="logo" src="../_static/logo.svg" alt="Logo"/>
    
    <h1 class="logo logo-name">PySDR: A Guide to SDR and DSP using Python</h1>
    
  </a>
</p>



<p class="blurb">By <a href="https://pysdr.org/content/about_author.html">Dr. Marc Lichtman</a></p>






<h3>Navigation</h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../content-fr/intro.html">1. Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../content-fr/frequency_domain.html">2. Domaine fréquentiel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../content-fr/sampling.html">3. échantillonnage IQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../content-fr/digital_modulation.html">4. Modulation numérique</a></li>
<li class="toctree-l1"><a class="reference internal" href="../content-fr/pluto.html">5. PlutoSDR en Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="../content-fr/usrp.html">6. USRP en Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="../content-fr/noise.html">7. le Bruit et les dB</a></li>
<li class="toctree-l1"><a class="reference internal" href="../content-fr/filters.html">8. Filtres</a></li>
<li class="toctree-l1"><a class="reference internal" href="../content-fr/link_budgets.html">9. Bilans de liaison</a></li>
<li class="toctree-l1"><a class="reference internal" href="../content-fr/channel_coding.html">10. Codage Canal</a></li>
<li class="toctree-l1"><a class="reference internal" href="../content-fr/iq_files.html">11. Fichiers IQ et SigMF</a></li>
<li class="toctree-l1"><a class="reference internal" href="../content-fr/multipath_fading.html">12. Evanouissement par Multi-Trajets</a></li>
<li class="toctree-l1"><a class="reference internal" href="../content-fr/pulse_shaping.html">13. Mise en Forme</a></li>
<li class="toctree-l1"><a class="reference internal" href="../content-fr/sync.html">14. Synchronisation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../content-fr/rds.html">15. Exemple bout en bout</a></li>
<li class="toctree-l1"><a class="reference internal" href="../content-fr/about_author.html">16. A propos de l’auteur</a></li>
</ul>


<hr />
<ul>
    
    <li class="toctree-l1"><a href="https://trinket.io/embed/python3">Online Python Console</a></li>
    
</ul>
<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index-fr.html">Documentation overview</a><ul>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="documentwrapper">
        <div class="bodywrapper">
              <div class="related top">
                &nbsp;
  <nav id="rellinks">
    <ul>
    </ul>
  </nav>
              </div>
          

          <div class="body" role="main">
            
  <div class="section" id="ruis-en-db">
<span id="noise-chapter"></span><h1><span class="section-number">7. </span>Ruis en dB<a class="headerlink" href="#ruis-en-db" title="Permalink to this headline">¶</a></h1>
<p>In dit hoofdstuk behandelen we ruis, hoe het wordt gemodelleerd en hoe ermee wordt omgegaan in draadloze systemen.
Concepten als AWGN, complexe ruis en SNR/SINR komen langs.
Onderweg introduceren we ook decibellen (dB) omdat dit veel gebruikt wordt binnen draadloze communicatiesystemen en SDR.</p>
<div class="section" id="gaussische-ruis">
<h2>Gaussische Ruis<a class="headerlink" href="#gaussische-ruis" title="Permalink to this headline">¶</a></h2>
<p>De meeste mensen zijn bekend met het concept van ruis: ongewilde fluctuaties dat ons signaal kan overstemmen. Ruis ziet er ongeveer zo uit:</p>
<a class="reference internal image-reference" href="../_images/noise.png"><img alt="../_images/noise.png" class="align-center" src="../_images/noise.png" style="width: 663.5999999999999px; height: 352.09999999999997px;" /></a>
<p>We merken op dat het gemiddelde ruisniveau in het tijddomein-figuur nul is.
Als de gemiddelde waarde niet nul zou zijn, dan hadden we de gemiddelde waarde, de offset, ervan af kunnen halen, en dan zouden we over zijn gebleven met een gemiddelde van nul. Ook merken we op dat de individuele punten in het figuur <em>niet</em> “uniform” verdeeld zijn, hogere waarden zijn minder aanwezig dan punten die dichter bij nul zitten.</p>
<p>We noemen dit “gaussische ruis”.
Dat is een goed model voor het type ruis wat ontstaat door vele natuurlijke bronnen, zoals de thermische trilling van atomen binnen het silicium van de RF-componenten in onze ontvanger.
Volgens de <strong>centrale limietstelling</strong> zal de sommatie van vele stochastische/willekeurige processen altijd naar een gaussische verdeling convergeren, zelfs wanneer de individuele processen andere verdelingen hebben.</p>
<a class="reference external image-reference" href="../_images/central_limit_theorem.svg" rel="noopener noreferrer" target="_blank"><img alt="../_images/central_limit_theorem.svg" class="align-center" src="../_images/central_limit_theorem.svg" /></a>
<p>De gaussische verdeling wordt de “normale” verdeling genoemd.</p>
<p>De normale verdeling heeft twee parameters: gemiddelde/verwachtingswaarde en variantie.
We hebben al behandeld waarom het gemiddelde als nul kan worden gezien, omdat een statische afwijking altijd eraf kan worden gehaald.
De variantie verteld ons hoe “sterk” de ruis is.
Een hogere variantie zal leiden tot hogere nummers.
Om deze reden wordt het vermogen ook gedefinieerd door de variantie.</p>
<p>De variantie staat gelijk aan de standaard deviatie in het kwadraat (<img class="math" src="../_images/math/6ba6a750dfd04fbdaf6ec0daeca3e068d61d54e1.svg" alt="\sigma^2"/>).</p>
</div>
<div class="section" id="decibellen-db">
<h2>Decibellen (dB)<a class="headerlink" href="#decibellen-db" title="Permalink to this headline">¶</a></h2>
<p>We gaan een kort zijspoor in om dB te introduceren.
Als je van dB hebt gehoord, voel je dan vrij om dit deel over te slaan.</p>
<p>Het werken met dB is extreem handig wanneer we met kleine en grote getallen op hetzelfde moment werken, of gewoon een hoop supergrote getallen. Kijk eens naar voorbeelden 1 en 2 om te zien hoe moeizaam het is zonder dB te werken:</p>
<p>Voorbeeld 1: Signaal 1 heeft een vermogen van 2 Watt en de ruisvloer is 0.0000002 Watt.</p>
<p>Voorbeeld 2: Een vuilnisbelt is 100000 keer luider dan een stille omgeving, terwijl een kettingzaag 10000 keer luider is dan een vuilnisbelt (geluidsgolven).</p>
<p>Zonder dB, dus in normale “lineaire” termen, hebben we een hoop nullen nodig om de waarden in voorbeelden 1 en 2 te kunnen weergeven.
Als we de waarden van signaal 1 zouden willen tonen in de tijd, dan zouden we de ruisvloer niet eens zien!
Als bijvoorbeeld de y-as van 0 tot 3 Watt loopt, dan zou de ruis te klein zijn om zichtbaar te worden in de grafiek.
Om beide waarden in dezelfde schaal te kunnen gebruiken, moeten we overgaan naar de logaritmische schaal.</p>
<p>Om het probleem van de juiste schaal in DSP nog duidelijker te maken, kijken we naar de onderstaande watervaldiagrammen van dezelfde drie signalen.
De linker kant is het originele signaal in de lineaire schaal, en de rechterkant laat de signalen zien in een logaritmische schaal (dB).
Beide representaties gebruiken dezelfde kleurcodering, blauw heeft de laagste waarde en geel de hoogste.
Je kunt in het linker figuur, in de lineaire schaal, het signaal nauwelijks zien.</p>
<a class="reference internal image-reference" href="../_images/linear_vs_log.png"><img alt="../_images/linear_vs_log.png" class="align-center" src="../_images/linear_vs_log.png" style="width: 686.0px; height: 240.79999999999998px;" /></a>
<p>We kunnen voor een gegeven waarde x, het met de volgende formule in dB zetten:</p>
<div class="math">
<p><img src="../_images/math/35f24a017cd3f62cdb401cd6ac8c54dd26c5b6f1.svg" alt="x_{dB} = 10 \log_{10} x"/></p>
</div><p>In Python:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">x_db</span> <span class="o">=</span> <span class="mf">10.0</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
</pre></div>
</div>
<p>Misschien heb je de <code class="code docutils literal notranslate"><span class="pre">10</span> <span class="pre">*</span></code> als een <code class="code docutils literal notranslate"><span class="pre">20</span> <span class="pre">*</span></code> gezien in andere domeinen.
Wanneer je met een of ander vermogen werkt, dan gebruik je 10, als je werkt met spanning of stroom dan gebruik je 20.
Binnen de DSP-wereld werken we meestal met vermogens.
Het is zelfs zo dat in heel dit boek we geen 20 in plaats van de 10 nodig hebben.</p>
<p>We kunnen terugrekenen van dB naar lineair (normale getallen) met:</p>
<div class="math">
<p><img src="../_images/math/20766f0f56596f4a74c03729f1bfb5c48d266aca.svg" alt="x = 10^{x_{dB}/10}"/></p>
</div><p>In Python:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">x</span> <span class="o">=</span> <span class="mf">10.0</span> <span class="o">**</span> <span class="p">(</span><span class="n">x_db</span> <span class="o">/</span> <span class="mf">10.0</span><span class="p">)</span>
</pre></div>
</div>
<p>Raak niet verstrikt in deze vergelijkingen, er is een concept waar het om draait.
In DSP werken we met enorm kleine getallen en enorm grote getallen samen (bijv. signaal- vergeleken met ruisvermogen).
Wanneer we in dB werken hebben we een groter dynamisch bereik om getallen uit te drukken in tekst of een grafiek.
Daarnaast geeft het een aantal andere voordelen zoals de mogelijkheid om ze bij elkaar op te tellen waar we normaal zouden vermenigvuldigen (zoals je zult zien in het <a class="reference internal" href="link_budgets.html#link-budgets-chapter"><span class="std std-ref">Link Budgets</span></a> hoofdstuk).</p>
<p>Een aantal veel voorkomende fouten die nieuwelingen maken:</p>
<ol class="arabic simple">
<li><img class="math" src="../_images/math/211c959b10cd8248d5e35186bc92d0c81b465b13.svg" alt="ln()=log^e()"/> gebruiken in plaats van <img class="math" src="../_images/math/d41050241dcd7fea4a13b462b6b0da7f2dbc9eee.svg" alt="log^{10}()"/>. Dit komt omdat in de meeste talen log() voor het natuurlijke logaritme wordt gebruikt.</li>
<li>Bij het gebruik van getallen of grafiekassen vergeten te melden dat het in dB is. Dit moet ergens aangegeven worden.</li>
<li>In dB waarden vermenigvuldigen/delen in plaats van optellen/aftrekken. Bijvoorbeeld:</li>
</ol>
<a class="reference internal image-reference" href="../_images/db.png"><img alt="../_images/db.png" class="align-center" src="../_images/db.png" style="width: 854.4000000000001px; height: 221.60000000000002px;" /></a>
<p>Wat ook belangrijk is om te beseffen , is dat dB technisch gezien geen “eenheid” is.
Een waarde in dB is eenheid-loos omdat het over een verhouding gaat, zoals wanneer iets 2x groter is, er is geen eenheid totdat ik je vertel over welke eenheid het gaat.
dB is relatief.
Wanneer men het over dB heeft in de context van audio, bedoelt men meestal dBA, wat wordt gebruikt voor volume (de A staat voor de eenheid).
In draadloze systemen gebruiken we meestal Watt om een vermogensniveau aan te geven.
Om die reden zie je misschien dBW als eenheid, wat relatief is aan 1 Watt.
Misschien zie je ook dBmW wat relatief is aan 1 mW (en wordt vaak als dBm geschreven).
Als iemand bijvoorbeeld zegt dat de zender is afgesteld op 3 dBW, dan gaat dat over <img class="math" src="../_images/math/2621709a8757e8a1be23fb817e975e50201da58d.svg" alt="10^{\frac{1}{3}}=1.995\approx 2"/> Watt.
Soms gebruiken we dB helemaal op zichzelf, dus relatief zonder eenheden.
Iemand zou bijv. kunnen zeggen dat “het ontvangen signaal 20 dB boven de ruisvloer staat”.
Een kleine tip hierbij: 0 dBm = -30 dBW.</p>
<p>Hier zijn een aantal standaardwaarden die ik aanraad om te onthouden:</p>
<table border="1" class="docutils align-default">
<colgroup>
<col width="54%" />
<col width="46%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Lineair</th>
<th class="head">dB</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>1x</td>
<td>0 dB</td>
</tr>
<tr class="row-odd"><td>2x</td>
<td>3 dB</td>
</tr>
<tr class="row-even"><td>10x</td>
<td>10 dB</td>
</tr>
<tr class="row-odd"><td>0.5x</td>
<td>-3 dB</td>
</tr>
<tr class="row-even"><td>0.1x</td>
<td>-10 dB</td>
</tr>
<tr class="row-odd"><td>100x</td>
<td>20 dB</td>
</tr>
<tr class="row-even"><td>1000x</td>
<td>30 dB</td>
</tr>
<tr class="row-odd"><td>10000x</td>
<td>40 dB</td>
</tr>
</tbody>
</table>
<p>En om afsluitend deze nummers een context te geven staan hieronder wat voorbeeld vermogens in dBm:</p>
<table border="1" class="docutils align-default">
<colgroup>
<col width="19%" />
<col width="81%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>80 dBm</td>
<td>Zendvermogen van een afgelegen FM-radio station</td>
</tr>
<tr class="row-even"><td>62 dBm</td>
<td>Max vermogen van een ham radiozender</td>
</tr>
<tr class="row-odd"><td>60 dBm</td>
<td>Vermogen van een typische magnetron</td>
</tr>
<tr class="row-even"><td>37 dBm</td>
<td>Vermogen van een typische draagbare radiozender</td>
</tr>
<tr class="row-odd"><td>27 dBm</td>
<td>Typisch zendvermogen van een mobiele telefoon</td>
</tr>
<tr class="row-even"><td>15 dBm</td>
<td>Typisch zendvermogen van Wifi</td>
</tr>
<tr class="row-odd"><td>10 dBm</td>
<td>Bluetooth (v 4) max zendvermogen</td>
</tr>
<tr class="row-even"><td>-10 dBm</td>
<td>Max ontvangstvermogen voor Wifi</td>
</tr>
<tr class="row-odd"><td>-70 dBm</td>
<td>Mogelijk ontvangstvermogen voor een ham signaal</td>
</tr>
<tr class="row-even"><td>-100 dBm</td>
<td>Minimale ontvangstvermogen voor Wifi</td>
</tr>
<tr class="row-odd"><td>-127 dBm</td>
<td>Typisch ontvangstvermogen van GPS satellieten</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="ruis-in-het-frequentiedomein">
<h2>Ruis in het frequentiedomein<a class="headerlink" href="#ruis-in-het-frequentiedomein" title="Permalink to this headline">¶</a></h2>
<p>In het <a class="reference internal" href="frequency_domain.html#freq-domain-chapter"><span class="std std-ref">Het Frequentiedomein</span></a> hoofdstuk hadden we het over Fourier-paren, bijv., hoe een tijddomein-signaal er in het frequentiedomein uitziet. Dus, hoe ziet gaussische ruis in het frequentiedomein eruit?
De komende grafieken laten gesimuleerde ruis in het tijddomein (boven) en de spectrale vermogensdichtheid (PSD) van de ruis (onder) zien.
De figuren komen uit GNU Radio.</p>
<a class="reference internal image-reference" href="../_images/noise_freq.png"><img alt="../_images/noise_freq.png" class="align-center" src="../_images/noise_freq.png" style="width: 599.5px; height: 506.00000000000006px;" /></a>
<p>We kunnen zien dat de ruis vrijwel vlak en gelijk is over alle frequenties.
Het blijkt dat gaussische ruis in het tijddomein ook gaussische ruis in het frequentiedomein is.
Waarom lijken de twee figuren dan niet op elkaar?
Dit komt doordat het frequentiedomein-figuur de modulus laat zien van de FFT, dus dat zal alleen positieve getallen opleveren.
En nog belangrijker, het gebruikt een logaritmische schaal om de waarden te weergeven in dB.
Anders hadden de figuren hetzelfde eruitgezien.
We kunnen dit zelf bewijzen door in Python wat ruis te genereren en daarna de FFT te nemen.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>

<span class="n">N</span> <span class="o">=</span> <span class="mi">1024</span> <span class="c1"># aantal samples om te simuleren, kies zelf een waarde</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="n">N</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="s1">&#39;.-&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

<span class="n">X</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">fft</span><span class="o">.</span><span class="n">fftshift</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">fft</span><span class="o">.</span><span class="n">fft</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>
<span class="n">X</span> <span class="o">=</span> <span class="n">X</span><span class="p">[</span><span class="n">N</span><span class="o">//</span><span class="mi">2</span><span class="p">:]</span> <span class="c1"># alleen de positieve frequenties // is een integer deling</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">real</span><span class="p">(</span><span class="n">X</span><span class="p">),</span> <span class="s1">&#39;.-&#39;</span><span class="p">)</span> <span class="c1">#reeele deel ipv lengte/modulus</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<p>We merken op dat de randn() functie standaard een gemiddelde heeft van 0 en variantie van 1. Beide figuren zullen er ongeveer zo uitzien:</p>
<a class="reference internal image-reference" href="../_images/noise_python.png"><img alt="../_images/noise_python.png" class="align-center" src="../_images/noise_python.png" style="width: 374.0px; height: 252.0px;" /></a>
<p>We zouden de vlakke PSD van GNU Radio kunnen genereren door vervolgens de logaritme te nemen en te middelen.
Het ruissignaal wat we in de FFT stopten was een reëel signaal (i.p.v. complex), en de FFT van een reëel signaal zal symmetrisch zijn rondom het midden (0 Hz), vandaar dat we alleen het positieve deel namen (de 2e helft).
Maar waarom hadden we alleen “reële” ruis gegenereerd, en hoe werkt dat met complexe signalen?</p>
</div>
<div class="section" id="complexe-ruis">
<h2>Complexe Ruis<a class="headerlink" href="#complexe-ruis" title="Permalink to this headline">¶</a></h2>
<p>“Complexe Gaussische” ruis zullen we ervaren met signalen in de basisband; het ruisvermogen wordt evenredig over de reële en imaginaire delen verdeeld.
Nog belangrijker is te beseffen dat de reële en imaginaire delen onafhankelijk van elkaar zijn; de waarde van het reële deel zegt niets over de waarde van het imaginaire deel.</p>
<p>In Python kunnen we complexe gaussische ruis genereren met:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">n</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">()</span> <span class="o">+</span> <span class="mi">1</span><span class="n">j</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">()</span>
</pre></div>
</div>
<p>Maar wacht! De bovenstaande vergelijking genereert niet dezelfde hoeveelheid ruisvermogen als <code class="code docutils literal notranslate"><span class="pre">np.random.randn()</span></code>.
Het gemiddelde vermogen van een signaal met een gemiddelde van 0 (of ruis) kunnen we vinden met:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">power</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">var</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
</pre></div>
</div>
<p>Waar np.var() de variantie berekent.
Dit levert voor <code class="code docutils literal notranslate"><span class="pre">n</span></code> een signaalvermogen op van 2.
Om complexe ruis te generen meet een vermogen van 1 (wat dingen eenvoudiger maakt) moeten we het ruissignaal normaliseren met:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">n</span> <span class="o">=</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="n">N</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="n">j</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="n">N</span><span class="p">))</span><span class="o">/</span><span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="c1"># AWGN with unity power</span>
</pre></div>
</div>
<p>Om de complexe ruis in het tijddomein te weergeven hebben we, zoals bij elk complex signaal, twee regels nodig:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">n</span> <span class="o">=</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="n">N</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="n">j</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="n">N</span><span class="p">))</span><span class="o">/</span><span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">real</span><span class="p">(</span><span class="n">n</span><span class="p">),</span><span class="s1">&#39;.-&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">imag</span><span class="p">(</span><span class="n">n</span><span class="p">),</span><span class="s1">&#39;.-&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">([</span><span class="s1">&#39;real&#39;</span><span class="p">,</span><span class="s1">&#39;imag&#39;</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<a class="reference internal image-reference" href="../_images/noise3.png"><img alt="../_images/noise3.png" class="align-center" src="../_images/noise3.png" style="width: 798.4000000000001px; height: 296.8px;" /></a>
<p>Zoals je ziet zijn de reële en imaginaire delen compleet onafhankelijk.</p>
<p>Hoe ziet die gaussische ruis op een IQ-diagram eruit?
Zoals je weet laat het IQ-diagram het reële deel (horizontaal) en het imaginaire deel (verticaal) zien.
In dit geval hebben beide assen een onafhankelijke gaussische verdeling.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">real</span><span class="p">(</span><span class="n">n</span><span class="p">),</span><span class="n">np</span><span class="o">.</span><span class="n">imag</span><span class="p">(</span><span class="n">n</span><span class="p">),</span><span class="s1">&#39;.&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">True</span><span class="p">,</span> <span class="n">which</span><span class="o">=</span><span class="s1">&#39;both&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">axis</span><span class="p">([</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<a class="reference internal image-reference" href="../_images/noise_iq.png"><img alt="../_images/noise_iq.png" class="align-center" src="../_images/noise_iq.png" style="width: 357.59999999999997px; height: 330.0px;" /></a>
<p>Dit ziet eruit zoals we het zouden verwachten; een willekeurige klodder met het midden rond 0+0j, de oorsprong.
Laten we voor de lol, om te kijken hoe het eruit ziet, wat ruis proberen toe te voegen aan een QPSK-signaal:</p>
<a class="reference internal image-reference" href="../_images/noisey_qpsk.png"><img alt="../_images/noisey_qpsk.png" class="align-center" src="../_images/noisey_qpsk.png" style="width: 721.1999999999999px; height: 342.0px;" /></a>
<p>En wat als de ruis nog sterker is?</p>
<a class="reference internal image-reference" href="../_images/noisey_qpsk2.png"><img alt="../_images/noisey_qpsk2.png" class="align-center" src="../_images/noisey_qpsk2.png" style="width: 643.5px; height: 229.0px;" /></a>
<p>Nu beginnen we een gevoel te krijgen waarom het niet zo simpel is om draadloos data over te sturen.
We willen zoveel mogelijk bits per symbool versturen, maar als de ruis te groot is zullen we bij de ontvanger verkeerde bits krijgen.</p>
</div>
<div class="section" id="awgn">
<h2>AWGN<a class="headerlink" href="#awgn" title="Permalink to this headline">¶</a></h2>
<p>Additive White Gaussian Noise (AWGN) is een afkorting die je vaak in de DSP en SDR-wereld zult tegenkomen.
GN, gaussische ruis, hebben we al behandeld.
‘Additive’ of toevoegend, betekent gewoon dat de ruis wordt toegevoegd aan ons ontvangen signaal.
‘White’ of wit, betekent dat het frequentiespectrum over het volledig geobserveerde bereik vlak is.
In de praktijk is het bijna altijd wit, of vrijwel wit.
In dit boek zullen we alleen AWGN in beschouwing nemen bij het behandelen van communicatieketens en ketenbudgetten e.d.
Niet-AWGN ruis is een vak apart.</p>
</div>
<div class="section" id="snr-en-sinr">
<h2>SNR en SINR<a class="headerlink" href="#snr-en-sinr" title="Permalink to this headline">¶</a></h2>
<p>Signal-to-Noise Ratio (SNR) of de signaalruisverhouding is hoe we het krachtverschil tussen het signaal en de ruis uitdrukken.
Het is een verhouding dus het heeft geen eenheid.
In de praktijk is SNR bijna altijd in dB.
Voor simulaties programmeren we onze signalen altijd op zo’n manier dat het een vermogen heeft van 1, of eenheidsvermogen.
Als we nu een SNR van 10 dB in de simulatie willen creëren, kunnen we simpelweg ruis genereren van -10 dB vermogen door bij het aanmaken van de ruis de variantie aan te passen.</p>
<div class="math">
<p><img src="../_images/math/1d7c441abf7305b4cba78098f05ede71b4ea0f91.svg" alt="\mathrm{SNR} = \frac{P_{signaal}}{P_{ruis}}"/></p>
</div><div class="math">
<p><img src="../_images/math/3a24ad418d456684f6085c330b96f3fb5954442a.svg" alt="\mathrm{SNR_{dB}} = P_{signaal\_dB} - P_{ruis\_dB}"/></p>
</div><p>Als iemand het over “SNR = 0 dB” heeft, betekent het dat het signaal- en ruisvermogen gelijk zijn.
Een positieve SNR betekent dat het signaalvermogen groter is dan van de ruis, terwijl een negatieve SNR aangeeft dat het ruisvermogen groter is dan het signaalvermogen.
Het is meestal erg lastig om signalen met een negatieve SNR nog te kunnen detecteren.</p>
<p>Zoals eerder gezegd is het vermogen van een signaal gelijk aan de variantie van dat signaal.
We zouden dus SNR kunnen uitdrukken in de verhouding van varianties:</p>
<div class="math">
<p><img src="../_images/math/e97ed2de53cb372fb3e523371fb739ec9f498f69.svg" alt="\mathrm{SNR} = \frac{P_{signaal}}{P_{ruis}} = \frac{\sigma^2_{signaal}}{\sigma^2_{ruis}}"/></p>
</div><p>Signal-to-Interference-plus-noise verhouding (SINR) of signaal-tot-verstoring-plus-ruis is in essentie hetzelfde als SNR, maar je neemt in de deler ook de verstoring mee.</p>
<div class="math">
<p><img src="../_images/math/5e19c065af39bd9c7ad3452c84b9bb4a1cef43c2.svg" alt="\mathrm{SINR} = \frac{P_{signaal}}{P_{verstoring} + P_{ruis}}"/></p>
</div><p>Wat die verstoring inhoudt, verschilt per toepassing/situatie, maar meestal gaat het om een ander ongewenst signaal wat het signaal van interesse verstoort op zo’n manier dat het niet weg te filteren is.</p>
</div>
<div class="section" id="extra-leesmateriaal">
<h2>Extra leesmateriaal<a class="headerlink" href="#extra-leesmateriaal" title="Permalink to this headline">¶</a></h2>
<p>Bronnen over AWGN, SNR, en variantie:</p>
<ol class="arabic simple">
<li><a class="reference external" href="https://en.wikipedia.org/wiki/Additive_white_Gaussian_ruis" rel="noopener noreferrer" target="_blank">https://en.wikipedia.org/wiki/Additive_white_Gaussian_ruis</a></li>
<li><a class="reference external" href="https://en.wikipedia.org/wiki/signaal-to-ruis_ratio" rel="noopener noreferrer" target="_blank">https://en.wikipedia.org/wiki/signaal-to-ruis_ratio</a></li>
<li><a class="reference external" href="https://en.wikipedia.org/wiki/Variance" rel="noopener noreferrer" target="_blank">https://en.wikipedia.org/wiki/Variance</a></li>
</ol>
</div>
</div>


          </div>
              <div class="related bottom">
                &nbsp;
  <nav id="rellinks">
    <ul>
    </ul>
  </nav>
              </div>
          
        </div>
      </div>
    <div class="clearer"></div>
  </div>
    <div class="footer">
      &copy;2023, Marc Lichtman.
      
    </div>

    

    
  </body>
</html>